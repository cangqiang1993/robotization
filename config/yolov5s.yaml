# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license
# æ¸¸æˆç›®æ ‡æ£€æµ‹ä¸“ç”¨é…ç½®æ–‡ä»¶

# --------------------------- æ¨¡å‹æ¶æ„ ---------------------------
nc: 5  # æ£€æµ‹ç±»åˆ«æ•° (æ ¹æ®æ¸¸æˆç›®æ ‡è°ƒæ•´)
depth_multiple: 0.33  # æ¨¡å‹æ·±åº¦ç³»æ•°
width_multiple: 0.50  # å±‚é€šé“ç³»æ•°

# ------------------------- é”šç‚¹æ¡†é…ç½® -------------------------
anchors:
  - [10,13, 16,30, 33,23]    # P3/8  (å°ç›®æ ‡å±‚)
  - [30,61, 62,45, 59,119]   # P4/16 (ä¸­ç›®æ ‡å±‚)
  - [116,90, 156,198, 373,326] # P5/32 (å¤§ç›®æ ‡å±‚)

# ------------------------- ä¸»å¹²ç½‘ç»œ -------------------------
backbone:
  # [æ¥æº, é‡å¤æ¬¡æ•°, æ¨¡å—, å‚æ•°]
  [[-1, 1, Focus, [64, 3]],     # 0-P1/2
  [[-1, 1, Conv, [128, 3, 2]],   # 1-P2/4
  [[-1, 3, C3, [128]],
  [[-1, 1, Conv, [256, 3, 2]],   # 3-P3/8
  [[-1, 6, C3, [256]],
  [[-1, 1, Conv, [512, 3, 2]],   # 5-P4/16
  [[-1, 9, C3, [512]],
  [[-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32
  [[-1, 3, C3, [1024]],
  [[-1, 1, SPPF, [1024, 5]],     # 9

# ------------------------- æ£€æµ‹å¤´ -------------------------
head:
  [[-1, 1, Conv, [512, 1, 1]],
  [[-1, 1, nn.Upsample, [None, 2, 'nearest']],
  [[-6, 1, Conv, [512, 1, 1]],   # ç‰¹å¾èåˆ
  [[-2, -1], 1, Concat, [1]],
  [[-1, 3, C3, [512, False]],

  [[-1, 1, Conv, [256, 1, 1]],
  [[-1, 1, nn.Upsample, [None, 2, 'nearest']],
  [[-13, 1, Conv, [256, 1, 1]],  # ç‰¹å¾èåˆ
  [[-2, -1], 1, Concat, [1]],
  [[-1, 3, C3, [256, False]],

  [[-1, 1, Conv, [256, 3, 2]],
  [[-1, -11], 1, Concat, [1]],
  [[-1, 3, C3, [512, False]],

  [[-1, 1, Conv, [512, 3, 2]],
  [[-1, -7], 1, Concat, [1]],
  [[-1, 3, C3, [1024, False]],

  [[[17, 20, 23], 1, Detect, [nc, anchors]],  # Detectå±‚
]